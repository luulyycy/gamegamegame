<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è²ªé£Ÿè›‡éŠæˆ² - åƒè˜‹æœé¦™è•‰</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        h1 {
            color: #4CAF50;
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }
        
        .subtitle {
            color: #ffcc00;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }
        
        .game-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 30px;
            max-width: 1000px;
            width: 100%;
        }
        
        .game-info {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            width: 300px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(5px);
        }
        
        .score-board {
            margin-bottom: 30px;
        }
        
        .score-title {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #4CAF50;
        }
        
        .score-value {
            font-size: 3rem;
            font-weight: bold;
            color: #ffcc00;
            text-align: center;
            margin: 15px 0;
        }
        
        .food-info {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }
        
        .food-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .food-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 8px;
        }
        
        .apple {
            background-color: #ff4757;
        }
        
        .banana {
            background-color: #ffcc00;
            color: #333;
        }
        
        .controls {
            margin-top: 30px;
        }
        
        .controls-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: #4CAF50;
        }
        
        .key {
            display: inline-block;
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 8px;
            margin: 5px;
            font-weight: bold;
            border: 2px solid #4CAF50;
        }
        
        .game-buttons {
            margin-top: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .btn {
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-start {
            background-color: #4CAF50;
            color: white;
        }
        
        .btn-pause {
            background-color: #ff9800;
            color: white;
        }
        
        .btn-reset {
            background-color: #f44336;
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .game-area {
            position: relative;
        }
        
        #game-canvas {
            background-color: #0f3460;
            border-radius: 15px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.4);
            border: 3px solid #4CAF50;
        }
        
        .game-status {
            margin-top: 20px;
            font-size: 1.5rem;
            color: #4CAF50;
            text-align: center;
            height: 40px;
        }
        
        .instructions {
            max-width: 800px;
            margin-top: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            line-height: 1.6;
        }
        
        .instructions h3 {
            color: #4CAF50;
            margin-bottom: 10px;
        }
        
        .instructions ul {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
        
        @media (max-width: 900px) {
            .game-container {
                flex-direction: column;
                align-items: center;
            }
            
            .game-info {
                width: 100%;
                max-width: 500px;
            }
        }
        
        @media (max-width: 600px) {
            #game-canvas {
                width: 95vw;
                height: 95vw;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>è²ªé£Ÿè›‡å¤§å†’éšª</h1>
        <p class="subtitle">åƒè˜‹æœå’Œé¦™è•‰ï¼Œç²å¾—é«˜åˆ†ï¼</p>
    </div>
    
    <div class="game-container">
        <div class="game-info">
            <div class="score-board">
                <div class="score-title">ç•¶å‰åˆ†æ•¸</div>
                <div class="score-value" id="score">0</div>
                <div class="food-info">
                    <div class="food-item">
                        <div class="food-icon apple">ğŸ</div>
                        <div>è˜‹æœ: <span id="apple-count">0</span></div>
                    </div>
                    <div class="food-item">
                        <div class="food-icon banana">ğŸŒ</div>
                        <div>é¦™è•‰: <span id="banana-count">0</span></div>
                    </div>
                </div>
            </div>
            
            <div class="controls">
                <div class="controls-title">éŠæˆ²æ§åˆ¶</div>
                <div>
                    <span class="key">â†‘</span> å‘ä¸Šç§»å‹•<br>
                    <span class="key">â†“</span> å‘ä¸‹ç§»å‹•<br>
                    <span class="key">â†</span> å‘å·¦ç§»å‹•<br>
                    <span class="key">â†’</span> å‘å³ç§»å‹•<br>
                    <span class="key">ç©ºæ ¼éµ</span> æš«åœ/ç¹¼çºŒ
                </div>
            </div>
            
            <div class="game-buttons">
                <button class="btn btn-start" id="start-btn">é–‹å§‹éŠæˆ²</button>
                <button class="btn btn-pause" id="pause-btn">æš«åœéŠæˆ²</button>
                <button class="btn btn-reset" id="reset-btn">é‡æ–°é–‹å§‹</button>
            </div>
        </div>
        
        <div class="game-area">
            <canvas id="game-canvas" width="500" height="500"></canvas>
            <div class="game-status" id="game-status">é»æ“Šã€Œé–‹å§‹éŠæˆ²ã€æŒ‰éˆ•é–‹å§‹</div>
        </div>
    </div>
    
    <div class="instructions">
        <h3>éŠæˆ²è¦å‰‡ï¼š</h3>
        <ul>
            <li>ä½¿ç”¨æ–¹å‘éµæ§åˆ¶è²ªé£Ÿè›‡ç§»å‹•</li>
            <li>åƒåˆ°ç´…è‰²è˜‹æœå¯ä»¥ç²å¾—10åˆ†</li>
            <li>åƒåˆ°é»ƒè‰²é¦™è•‰å¯ä»¥ç²å¾—20åˆ†</li>
            <li>è²ªé£Ÿè›‡ä¸èƒ½æ’åˆ°ç‰†å£æˆ–è‡ªå·±çš„èº«é«”</li>
            <li>æ¯åƒä¸€å€‹é£Ÿç‰©ï¼Œè²ªé£Ÿè›‡æœƒè®Šé•·ä¸€æ ¼</li>
            <li>éŠæˆ²é€Ÿåº¦æœƒéš¨è‘—åˆ†æ•¸å¢åŠ è€Œæé«˜</li>
            <li>é»æ“Šã€Œæš«åœéŠæˆ²ã€å¯ä»¥æš«åœ/ç¹¼çºŒéŠæˆ²</li>
        </ul>
    </div>

    <script>
        // éŠæˆ²è®Šæ•¸
        const canvas = document.getElementById('game-canvas');
        const ctx = canvas.getContext('2d');
        const scoreElement = document.getElementById('score');
        const appleCountElement = document.getElementById('apple-count');
        const bananaCountElement = document.getElementById('banana-count');
        const gameStatusElement = document.getElementById('game-status');
        const startBtn = document.getElementById('start-btn');
        const pauseBtn = document.getElementById('pause-btn');
        const resetBtn = document.getElementById('reset-btn');
        
        // éŠæˆ²è¨­å®š
        const gridSize = 20;
        const gridWidth = canvas.width / gridSize;
        const gridHeight = canvas.height / gridSize;
        
        // éŠæˆ²ç‹€æ…‹
        let snake = [];
        let food = {};
        let direction = 'right';
        let nextDirection = 'right';
        let score = 0;
        let appleCount = 0;
        let bananaCount = 0;
        let gameSpeed = 150; // æ¯«ç§’
        let gameRunning = false;
        let gamePaused = false;
        let gameLoop;
        
        // åˆå§‹åŒ–éŠæˆ²
        function initGame() {
            // åˆå§‹åŒ–è²ªé£Ÿè›‡
            snake = [
                {x: 5, y: 10},
                {x: 4, y: 10},
                {x: 3, y: 10}
            ];
            
            // åˆå§‹åŒ–é£Ÿç‰©
            generateFood();
            
            // åˆå§‹åŒ–éŠæˆ²ç‹€æ…‹
            direction = 'right';
            nextDirection = 'right';
            score = 0;
            appleCount = 0;
            bananaCount = 0;
            gameSpeed = 150;
            
            // æ›´æ–°UI
            updateUI();
            gameStatusElement.textContent = "æº–å‚™é–‹å§‹éŠæˆ²";
        }
        
        // ç”Ÿæˆé£Ÿç‰©
        function generateFood() {
            // éš¨æ©Ÿé¸æ“‡é£Ÿç‰©é¡å‹ï¼šè˜‹æœæˆ–é¦™è•‰
            const foodType = Math.random() > 0.5 ? 'apple' : 'banana';
            
            // éš¨æ©Ÿç”Ÿæˆé£Ÿç‰©ä½ç½®
            let foodPosition;
            let validPosition = false;
            
            while (!validPosition) {
                foodPosition = {
                    x: Math.floor(Math.random() * gridWidth),
                    y: Math.floor(Math.random() * gridHeight),
                    type: foodType
                };
                
                // æª¢æŸ¥é£Ÿç‰©æ˜¯å¦èˆ‡è²ªé£Ÿè›‡é‡ç–Š
                validPosition = true;
                for (let segment of snake) {
                    if (segment.x === foodPosition.x && segment.y === foodPosition.y) {
                        validPosition = false;
                        break;
                    }
                }
            }
            
            food = foodPosition;
        }
        
        // ç¹ªè£½è²ªé£Ÿè›‡
        function drawSnake() {
            // ç¹ªè£½è›‡èº«
            snake.forEach((segment, index) => {
                // è›‡é ­ç”¨ä¸åŒé¡è‰²
                if (index === 0) {
                    ctx.fillStyle = '#2ecc71'; // è¼ƒæ·ºçš„ç¶ è‰²
                } else {
                    ctx.fillStyle = '#27ae60'; // ç¶ è‰²
                }
                
                ctx.fillRect(segment.x * gridSize, segment.y * gridSize, gridSize - 1, gridSize - 1);
                
                // ç¹ªè£½è›‡é ­çœ¼ç›
                if (index === 0) {
                    ctx.fillStyle = '#000';
                    // æ ¹æ“šæ–¹å‘ç¹ªè£½çœ¼ç›
                    if (direction === 'right') {
                        ctx.fillRect((segment.x * gridSize) + gridSize - 6, (segment.y * gridSize) + 5, 3, 3);
                        ctx.fillRect((segment.x * gridSize) + gridSize - 6, (segment.y * gridSize) + gridSize - 8, 3, 3);
                    } else if (direction === 'left') {
                        ctx.fillRect((segment.x * gridSize) + 3, (segment.y * gridSize) + 5, 3, 3);
                        ctx.fillRect((segment.x * gridSize) + 3, (segment.y * gridSize) + gridSize - 8, 3, 3);
                    } else if (direction === 'up') {
                        ctx.fillRect((segment.x * gridSize) + 5, (segment.y * gridSize) + 3, 3, 3);
                        ctx.fillRect((segment.x * gridSize) + gridSize - 8, (segment.y * gridSize) + 3, 3, 3);
                    } else if (direction === 'down') {
                        ctx.fillRect((segment.x * gridSize) + 5, (segment.y * gridSize) + gridSize - 6, 3, 3);
                        ctx.fillRect((segment.x * gridSize) + gridSize - 8, (segment.y * gridSize) + gridSize - 6, 3, 3);
                    }
                }
            });
        }
        
        // ç¹ªè£½é£Ÿç‰©
        function drawFood() {
            if (food.type === 'apple') {
                // ç¹ªè£½è˜‹æœ
                ctx.fillStyle = '#ff4757';
                ctx.beginPath();
                ctx.arc(
                    food.x * gridSize + gridSize/2, 
                    food.y * gridSize + gridSize/2, 
                    gridSize/2 - 2, 
                    0, 
                    Math.PI * 2
                );
                ctx.fill();
                
                // è˜‹æœæ¢—
                ctx.fillStyle = '#8b4513';
                ctx.fillRect(food.x * gridSize + gridSize/2 - 1, food.y * gridSize + 2, 2, 5);
                
                // è˜‹æœè‘‰å­
                ctx.fillStyle = '#2ecc71';
                ctx.beginPath();
                ctx.ellipse(
                    food.x * gridSize + gridSize/2 - 3, 
                    food.y * gridSize + 4, 
                    4, 2, 0, 0, Math.PI * 2
                );
                ctx.fill();
            } else {
                // ç¹ªè£½é¦™è•‰
                ctx.fillStyle = '#ffcc00';
                ctx.beginPath();
                ctx.ellipse(
                    food.x * gridSize + gridSize/2, 
                    food.y * gridSize + gridSize/2, 
                    gridSize/2 - 2, 
                    gridSize/3, 
                    Math.PI/4, 0, Math.PI * 2
                );
                ctx.fill();
                
                // é¦™è•‰æ¢—
                ctx.fillStyle = '#8b4513';
                ctx.fillRect(food.x * gridSize + gridSize/2 + 3, food.y * gridSize + 3, 2, 4);
            }
        }
        
        // æ›´æ–°éŠæˆ²ç‹€æ…‹
        function updateGame() {
            if (gamePaused || !gameRunning) return;
            
            // æ›´æ–°æ–¹å‘
            direction = nextDirection;
            
            // è¨ˆç®—æ–°çš„è›‡é ­ä½ç½®
            const head = {...snake[0]};
            
            switch (direction) {
                case 'up': head.y -= 1; break;
                case 'down': head.y += 1; break;
                case 'left': head.x -= 1; break;
                case 'right': head.x += 1; break;
            }
            
            // æª¢æŸ¥æ˜¯å¦æ’ç‰†
            if (head.x < 0 || head.x >= gridWidth || head.y < 0 || head.y >= gridHeight) {
                gameOver();
                return;
            }
            
            // æª¢æŸ¥æ˜¯å¦æ’åˆ°è‡ªå·±
            for (let segment of snake) {
                if (segment.x === head.x && segment.y === head.y) {
                    gameOver();
                    return;
                }
            }
            
            // å°‡æ–°é ­éƒ¨åŠ å…¥è²ªé£Ÿè›‡
            snake.unshift(head);
            
            // æª¢æŸ¥æ˜¯å¦åƒåˆ°é£Ÿç‰©
            if (head.x === food.x && head.y === food.y) {
                // æ ¹æ“šé£Ÿç‰©é¡å‹å¢åŠ åˆ†æ•¸
                if (food.type === 'apple') {
                    score += 10;
                    appleCount++;
                } else {
                    score += 20;
                    bananaCount++;
                }
                
                // éš¨è‘—åˆ†æ•¸å¢åŠ éŠæˆ²é€Ÿåº¦
                if (score > 50) gameSpeed = 100;
                if (score > 100) gameSpeed = 80;
                if (score > 200) gameSpeed = 60;
                
                // ç”Ÿæˆæ–°é£Ÿç‰©
                generateFood();
                
                // æ›´æ–°UI
                updateUI();
            } else {
                // å¦‚æœæ²’åƒåˆ°é£Ÿç‰©ï¼Œç§»é™¤å°¾éƒ¨
                snake.pop();
            }
            
            // ç¹ªè£½éŠæˆ²
            drawGame();
        }
        
        // ç¹ªè£½æ•´å€‹éŠæˆ²
        function drawGame() {
            // æ¸…é™¤ç•«å¸ƒ
            ctx.fillStyle = '#0f3460';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // ç¹ªè£½ç¶²æ ¼ç·š
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
            ctx.lineWidth = 1;
            
            for (let x = 0; x <= canvas.width; x += gridSize) {
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            
            for (let y = 0; y <= canvas.height; y += gridSize) {
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
            
            // ç¹ªè£½é£Ÿç‰©å’Œè²ªé£Ÿè›‡
            drawFood();
            drawSnake();
        }
        
        // æ›´æ–°UI
        function updateUI() {
            scoreElement.textContent = score;
            appleCountElement.textContent = appleCount;
            bananaCountElement.textContent = bananaCount;
        }
        
        // éŠæˆ²çµæŸ
        function gameOver() {
            gameRunning = false;
            clearInterval(gameLoop);
            gameStatusElement.textContent = `éŠæˆ²çµæŸï¼æœ€çµ‚åˆ†æ•¸: ${score}`;
            startBtn.textContent = "é‡æ–°é–‹å§‹";
        }
        
        // é–‹å§‹éŠæˆ²
        function startGame() {
            if (gameRunning) return;
            
            // å¦‚æœéŠæˆ²å°šæœªåˆå§‹åŒ–ï¼Œå‰‡åˆå§‹åŒ–
            if (snake.length === 0) {
                initGame();
            }
            
            gameRunning = true;
            gamePaused = false;
            gameStatusElement.textContent = "éŠæˆ²é€²è¡Œä¸­";
            startBtn.textContent = "éŠæˆ²é€²è¡Œä¸­";
            
            // é–‹å§‹éŠæˆ²å¾ªç’°
            clearInterval(gameLoop);
            gameLoop = setInterval(updateGame, gameSpeed);
        }
        
        // æš«åœ/ç¹¼çºŒéŠæˆ²
        function togglePause() {
            if (!gameRunning) return;
            
            gamePaused = !gamePaused;
            if (gamePaused) {
                gameStatusElement.textContent = "éŠæˆ²å·²æš«åœ";
                pauseBtn.textContent = "ç¹¼çºŒéŠæˆ²";
            } else {
                gameStatusElement.textContent = "éŠæˆ²é€²è¡Œä¸­";
                pauseBtn.textContent = "æš«åœéŠæˆ²";
            }
        }
        
        // é‡ç½®éŠæˆ²
        function resetGame() {
            clearInterval(gameLoop);
            gameRunning = false;
            gamePaused = false;
            initGame();
            drawGame();
            gameStatusElement.textContent = "æº–å‚™é–‹å§‹éŠæˆ²";
            startBtn.textContent = "é–‹å§‹éŠæˆ²";
            pauseBtn.textContent = "æš«åœéŠæˆ²";
        }
        
        // éµç›¤æ§åˆ¶
        document.addEventListener('keydown', (event) => {
            // ç©ºæ ¼éµæš«åœ/ç¹¼çºŒ
            if (event.key === ' ' || event.code === 'Space') {
                event.preventDefault();
                togglePause();
                return;
            }
            
            // æ–¹å‘éµæ§åˆ¶
            switch (event.key) {
                case 'ArrowUp':
                    if (direction !== 'down') nextDirection = 'up';
                    break;
                case 'ArrowDown':
                    if (direction !== 'up') nextDirection = 'down';
                    break;
                case 'ArrowLeft':
                    if (direction !== 'right') nextDirection = 'left';
                    break;
                case 'ArrowRight':
                    if (direction !== 'left') nextDirection = 'right';
                    break;
            }
        });
        
        // æŒ‰éˆ•äº‹ä»¶ç›£è½
        startBtn.addEventListener('click', startGame);
        pauseBtn.addEventListener('click', togglePause);
        resetBtn.addEventListener('click', resetGame);
        
        // åˆå§‹åŒ–éŠæˆ²
        initGame();
        drawGame();
    </script>
</body>
</html>